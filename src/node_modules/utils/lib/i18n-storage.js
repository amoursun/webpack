const APP_STORAGE_KEY = 'i18n_local_'

var storage = {
  getItem(key, defaultData = {}) {
    try {
      var str = localStorage.getItem(APP_STORAGE_KEY + key)
      try {
        var data = JSON.parse(str)
        if (!data || !data.lang) {
          return defaultData
        }
      } catch (ex) {
        return defaultData
      }
      return data || defaultData
    } catch (ex) {
      return defaultData
    }
  },
  setItem(key, data) {
    try {
      localStorage.setItem(APP_STORAGE_KEY + key, JSON.stringify(data))
    } catch (ex) {
      // localStorage is disabled do nothing
    }
  }
}

export default storage
