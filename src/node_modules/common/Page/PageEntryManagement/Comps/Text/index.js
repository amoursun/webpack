/**
 * @file index.js
 * @author gyl
 */
import React from 'react';
import {extendObservable, observable, runInAction} from 'mobx';
import {observer} from 'mobx-react';

@observer
export default class Text extends React.Component {
    handleChange(e) {
        const comp = this.props.comp;

        comp.changeValue(e.target.value);
        comp.clearError();
    }

    validate(e) {
        const comp = this.props.comp;

        if (comp.validate) {
            comp.validate();
        }
    }

    render() {
        const comp = this.props.comp;

        // console.log('@debug, ', this.props)

        return <div>
            <label>{comp.state.dispLabel}</label>
            <input value={comp.state.value}
                   type="text"
                   onChange={e => this.handleChange(e)}
                   onBlur={e => this.validate(e)}/>
            {comp.state.hasError ? comp.state.errorMessage : null}
        </div>;
    }
}

