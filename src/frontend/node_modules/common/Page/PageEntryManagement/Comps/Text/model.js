/**
 * @file model.js
 * @author gyl
 */
import {observable, action} from 'mobx';
import _ from 'lodash';

export default class TextModel {
    @observable state = {
        type: 'text',
        value: '',

        id: '',
        dispLabel: '',

        extra: null,

        // @todo 用于校验
        hasError: false,
        errorMessage: ''
    }

    constructor(value, id, dispLabel, opts = {}) {
        const extra = opts.extra;

        this.initValue(value, id, dispLabel, extra);
    }

    @action initValue(value, id, dispLabel, extra) {
        _.extend(this.state, {
            value, id, dispLabel, extra
        });
    }

    @action changeValue(value) {
        this.state.value = value;
    }

    @action clearError() {
        this.state.hasError = false;
    }

    wrapData() {
        return {
            id: this.state.id,
            value: this.state.value,
            extra: this.state.extra
        };
    }
}

