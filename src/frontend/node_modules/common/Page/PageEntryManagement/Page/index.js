import React from 'react';
import {observer, inject} from 'mobx-react';

import {mount, unmount} from './state';

import style from './style.use.less';

import FormItem from '../Comps/FormItem';

@inject('app', 'page')
@observer
export default class extends React.Component {

  componentWillMount() {
    console.log(this.props)
    style.use();
    mount(this.props.page);

    const page = this.props.page;

    page.entryPage.fetchEntries();
  }

  componentWillUnmount() {
    style.unuse();
    unmount(this.props.page);
  }

  renderEntries() {
    const page = this.props.page;

    return page.entryPage.checkboxes.map(item =>
      <FormItem key={item.state.id} comp={item}/>
    );
  }

  render() {
    const page = this.props.page;

    return <div>
      <h2>Modules 入口文件管理</h2>
      {this.renderEntries()}

      <div className="buttons">
        <button onClick={e => page.entryPage.submit()}>更改打开的入口</button>
      </div>
    </div>;
  }
}
